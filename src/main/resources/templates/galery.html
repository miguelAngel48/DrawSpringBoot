<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" th:href="@{/css/comon.css}" type="text/css" />
    <link rel="stylesheet" th:href="@{/css/draw.css}" type="text/css" />

    <title>Galery</title>
</head>

<body>
<header>
    <h2>
        Hello <b id="user" name="user" th:text="${user}"></b>
    </h2>

    <a th:href="@{/galery}" name="galery">Galery</a>
    <a th:href="@{/lienzo}" name="draw">Draw</a>
    <a th:href="@{/login}" name="logout">Logout</a>
</header>

<table id="galery">
    <tr>
        <th>User</th>
        <th>ID</th>
        <th>Draw name</th>
        <th>creation date</th>
        <th>last update</th>
        <th>width</th>
        <th>height</th>
        <th>
            <select name="list" id="listUsers">
                <option value="othersDraw">all draws</option>
                <option value="userDraw" th:text="${user} + ' draws'"></option>
            </select>
        </th>
    </tr>


    <tr th:each="draw : ${lista}"
        th:class="${user == draw.nameUser} ? 'owns' : 'others'">

        <th th:text="${draw.nameUser}"></th>
        <th th:text="${draw.id}"></th>
        <th th:text="${draw.name}"></th>
        <th th:text="${draw.dateSaved}"></th>
        <th th:text="${draw.dateUpdate}"></th>


        <th th:text="${draw.canvasSize[0]} + 'px'"></th>
        <th th:text="${draw.canvasSize[1]} + 'px'"></th>


        <th>
            <a th:if="${user == draw.nameUser}"
               th:href="@{/lienzo(id=${draw.id}, drawName=${draw.name}, dateServer=${draw.dateSaved}, width=${draw.canvasSize[0]}, height=${draw.canvasSize[1]})}">
                redraw
            </a>

            <a th:if="${user != draw.nameUser}"
               th:href="@{/lienzo(id=${draw.id}, drawName=${draw.name}, dateServer=${draw.dateSaved}, width=${draw.canvasSize[0]}, height=${draw.canvasSize[1]})}">
                create a copy
            </a>
        </th>


        <th>
            <form th:if="${user == draw.nameUser}"
                  th:action="@{/delete}" method="post">
                <input type="hidden" name="id" th:value="${draw.id}">
                <input type="submit" value="delete">
            </form>
        </th>
    </tr>
</table>

<script th:src="@{/scripts/galery.js}"></script>
</body>

</html>
